!function De(Me){var Ae=Me.document;!function(s,o){var t="default"in s?s.default:s,e="default"in o?o.default:o,r={uiRoot:null,element:function(){return this.uiRoot||(this.uiRoot=Ae.createElement("div"),s.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=s.shadowUI.getRoot();s.nativeMethods.nodeParentNodeGetter.call(t).removeChild(t)}},c=t.shadowUI,u=t.utils.browser,a=t.utils.featureDetection,d=t.nativeMethods,h=t.eventSandbox.eventSimulator,l=t.eventSandbox.listeners,p=e.positionUtils,m=e.domUtils,g=e.styleUtils,f=e.eventUtils,v=e.arrayUtils,y="tcOptionList",C="tcOptionGroup",E="tcOption",_="disabled",w=u.isIE?30:20,S=null,I=null,x=[],b=[];function T(t){(t.target||t.srcElement)===S||m.containsElement(S,t.target)||m.containsElement(I,t.target)||D()}function B(t,e,i){var n=v.indexOf(b,t.target);if(!(n<0)){i();var s=-1<t.target.className.indexOf(_);s&&u.isWebKit||function(t,e){var i=S.selectedIndex,n=S.getElementsByTagName("option")[t],s=!e&&t!==i;s&&!u.isIE&&(S.selectedIndex=t),u.isFirefox||u.isIE||!s||(h.input(S),h.change(S)),(u.isFirefox||u.isIE)&&h.mousedown(u.isFirefox?n:S),a.isTouchDevice||h.mouseup(u.isFirefox?n:S),(u.isFirefox||u.isIE)&&s&&(u.isIE&&(S.selectedIndex=t),u.isIE||h.input(S),h.change(S)),a.isTouchDevice||h.click(u.isFirefox||u.isIE?n:S),e||D()}(n,s)}}function U(t,e){for(var i,n,s,o,a,r,l,u=m.getChildrenLength(t),h=0;h<u;h++)m.isOptionElement(t[h])?(o=t[h],a=e,r=Ae.createElement("div"),l=o.disabled||"optgroup"===m.getTagName(o.parentElement)&&o.parentElement.disabled,d.nodeTextContentSetter.call(r,o.text),a.appendChild(r),c.addClass(r,E),l&&(c.addClass(r,_),g.set(r,"color",g.get(o,"color"))),b.push(r)):"optgroup"===m.getTagName(t[h])&&(i=t[h],n=e,s=Ae.createElement("div"),d.nodeTextContentSetter.call(s,i.label||" "),n.appendChild(s),c.addClass(s,C),s.disabled&&(c.addClass(s,_),g.set(s,"color",g.get(i,"color"))),U(i.children,s),x.push(s))}function D(){m.remove(I),f.unbind(Ae,"mousedown",T),S=I=null,b=[],x=[]}function M(t){return t?t===S:!!S}var i=Object.freeze({__proto__:null,expandOptionList:function(t){var e=t.children;if(e.length){if(S){var i=t===S;if(D(),i)return}S=t,I=Ae.createElement("div"),r.element().appendChild(I),c.addClass(I,y),U(e,I),l.addInternalEventListener(Me,["click"],B),d.setTimeout.call(Me,function(){f.bind(Ae,"mousedown",T)},0),g.set(I,{position:"absolute",fontSize:g.get(S,"fontSize"),fontFamily:g.get(S,"fontFamily"),minWidth:g.getWidth(S)+"px",left:p.getOffsetPosition(S).left+"px",height:m.getSelectVisibleChildren(t).length>w?g.getOptionHeight(t)*w:""});var n=p.getOffsetPosition(S).top,s=g.getHeight(I),o=n+g.getHeight(S)+2;if(o+s>g.getScrollTop(Me)+g.getHeight(Me)){var a=n-3-s;a>=g.getScrollTop(Me)&&(o=a)}g.set(I,"top",o+"px")}},collapseOptionList:D,isOptionListExpanded:M,getEmulatedChildElement:function(t){var e="optgroup"===m.getTagName(t),i=m.getElementIndexInParent(S,t);return e?x[i]:b[i]},scrollOptionListByChild:function(t){var e=m.getSelectParent(t);if(e){var i=g.getSelectElementSize(e),n=g.getOptionHeight(e),s=0,o=Math.max(g.getScrollTop(e)/n,0),a=o+i-1,r=m.getChildVisibleIndex(e,t);r<o?(s=n*(o-r),g.setScrollTop(e,Math.max(g.getScrollTop(e)-s,0))):a<r&&(s=n*(r-a),g.setScrollTop(e,g.getScrollTop(e)+s))}},getSelectChildCenter:function(t){var e=m.getSelectParent(t);if(!e)return{x:0,y:0};var i=g.getOptionHeight(e),n=p.getElementRectangle(t);return{x:Math.round(n.left+n.width/2),y:Math.round(n.top+i/2)}},switchOptionsByKeys:function(t,e){var i=g.getSelectElementSize(t),n=!g.hasDimensions(c.select("."+y)[0]);if(/down|up/.test(e)||!u.isIE&&(i<=1||u.isFirefox)&&(n||u.isFirefox)&&/left|right/.test(e)){for(var s=t.querySelectorAll("option"),o=[],a=0;a<s.length;a++){var r=s[a].parentElement;s[a].disabled||"optgroup"===m.getTagName(r)&&r.disabled||o.push(s[a])}var l=v.indexOf(o,s[t.selectedIndex])+(/down|right/.test(e)?1:-1);0<=l&&l<o.length&&(t.selectedIndex=v.indexOf(s,o[l]),u.isIE||h.input(t),h.change(t))}},isOptionElementVisible:function(t){var e=m.getSelectParent(t);if(!e)return!0;var i=M(e),n=g.getSelectElementSize(e);return i||1<n}}),A="Loading page...",V="modal-background",k="loading-text",P="loading-icon",R=null,W=null,O=null,F=!1;function L(){function t(){var t=o.styleUtils.getHeight(Me),e=o.styleUtils.getWidth(Me);o.styleUtils.set(R,"width",e+"px"),o.styleUtils.set(R,"height",t+"px"),o.styleUtils.set(O,{left:Math.round((e-o.styleUtils.getWidth(O))/2)+"px",top:Math.round((t-o.styleUtils.getHeight(O))/2)+"px"})}t(),o.eventUtils.bind(Me,"resize",t)}function n(){var t,e,i,n;t=r.element(),R=Ae.createElement("div"),t.appendChild(R),s.shadowUI.addClass(R,V),W=Ae.createElement("div"),s.nativeMethods.nodeTextContentSetter.call(W,A),t.appendChild(W),s.shadowUI.addClass(W,k),O=Ae.createElement("div"),o.styleUtils.set(O,"visibility","hidden"),t.appendChild(O),s.shadowUI.addClass(O,P),L(),e=o.styleUtils.getHeight(Me),i=o.styleUtils.getWidth(Me),(n=!o.styleUtils.hasDimensions(W))&&(o.styleUtils.set(W,"visibility","hidden"),o.styleUtils.set(W,"display","block")),o.styleUtils.set(W,{left:Math.max((i-o.styleUtils.getWidth(W))/2,0)+"px",top:Math.max((e-o.styleUtils.getHeight(W))/2,0)+"px"}),n&&(o.styleUtils.set(W,"display","none"),o.styleUtils.set(W,"visibility","")),F=!0}var H=Object.freeze({__proto__:null,initAndShowLoadingText:function(){function t(){n(),o.styleUtils.set(R,"opacity",.8),o.styleUtils.set(R,"display","block"),o.styleUtils.set(W,"display","block"),e=!0}var e=!1,i=function(){e||(Ae.body?t():s.nativeMethods.setTimeout.call(Me,i,0))};i(),o.eventUtils.documentReady().then(function(){e||t()})},show:function(t){F||n(),o.styleUtils.set(R,"opacity",t?0:.7),o.styleUtils.set(R,"display","block")},hide:function(){F&&(o.styleUtils.set(W,"display","none"),o.styleUtils.set(R,"display","none"))},showLoadingIcon:function(){o.styleUtils.set(O,"visibility","visible")},hideLoadingIcon:function(){o.styleUtils.set(O,"visibility","hidden")}}),N=t.shadowUI,q=e.styleUtils,z="success",G=(j.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),q.set(this.valueElement,"width",t+"%")},j.prototype.setSuccess=function(t){t?N.addClass(this.containerElement,z):N.removeClass(this.containerElement,z)},j);function j(t){this.containerElement=Ae.createElement("div"),this.valueElement=Ae.createElement("div"),t.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),N.addClass(this.containerElement,"progress-bar"),N.addClass(this.valueElement,"value")}var K=t.shadowUI,Y=t.nativeMethods,X=e.eventUtils,J=e.styleUtils,Q=(Z._getInvisibleElementProperty=function(t,e){var i="none"===J.get(t,"display");i&&J.set(t,"display","block");var n=t[e];return i&&J.set(t,"display","none"),n},Z._showAtWindowCenter=function(t){var e=Z._getInvisibleElementProperty(t,"offsetHeight"),i=Z._getInvisibleElementProperty(t,"offsetWidth"),n=Math.round(J.getHeight(Me)/2-e/2),s=Math.round(J.getWidth(Me)/2-i/2);J.set(t,{left:s+"px",top:n+"px"})},Z.prototype._setCurrentProgress=function(){var t=Math.round((Date.now()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},Z.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},Z.prototype._stopAnimation=function(){Y.clearInterval.call(Me,this.animationInterval)},Z.prototype._animate=function(t,e,i,n){var s=this,o=Date.now(),a=i?0:1,r=0,l=0,u=0;i&&(J.set(t,"opacity",a),J.set(t,"display","block")),this._stopAnimation(),this.animationInterval=Y.setInterval.call(Me,function(){r=Date.now()-o,l=Math.min(r/e,1),u=.5-Math.cos(l*Math.PI)/2,J.set(t,"opacity",a+(i?u:-u)),1===l&&(s._stopAnimation(),n&&n())},10)},Z.prototype._showPanel=function(){X.bind(Me,"resize",this.disposePanel),this._animate(this.panelDiv,200,!0)},Z.prototype._hidePanel=function(t){var e=this;this.startTime=null,X.unbind(Me,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:600,!1,function(){return J.set(e.panelDiv,"display","none")})},Z.prototype.show=function(t,e){var i=this;this.startTime=Date.now(),this.maxTimeout=e,Y.nodeTextContentSetter.call(this.titleDiv,t),this._setSuccess(!1),this.openingTimeout=Y.setTimeout.call(Me,function(){i.openingTimeout=null,i._setCurrentProgress(),i._showPanel(),i.updateInterval=Y.setInterval.call(Me,function(){return i._setCurrentProgress()},100)},300)},Z.prototype.close=function(t){var e=this;t&&this._setSuccess(!0),this.openingTimeout&&(Y.clearTimeout.call(Me,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(Y.clearInterval.call(Me,this.updateInterval),this.updateInterval=null),t?this.startTime&&Date.now()-this.startTime<1e3?Y.setTimeout.call(Me,function(){Y.setTimeout.call(Me,function(){return e._hidePanel(!1)},200)},100):Y.setTimeout.call(Me,function(){return e._hidePanel(!1)},200):this._hidePanel(!0)},Z);function Z(){var t=this;this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=Ae.createElement("div"),r.element().appendChild(this.panelDiv),this.titleDiv=Ae.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=Ae.createElement("div"),this.panelDiv.appendChild(this.contentDiv),K.addClass(this.panelDiv,"progress-panel"),K.addClass(this.titleDiv,"title"),K.addClass(this.contentDiv,"content"),Z._showAtWindowCenter(this.panelDiv),this.progressBar=new G(this.contentDiv),this.disposePanel=function(){return Z._showAtWindowCenter(t.panelDiv)}}var $=function(t,e){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function tt(t,e){function i(){this.constructor=t}$(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var et=t.shadowUI,it=t.nativeMethods,nt=e.styleUtils,st="determinate",ot=(at.prototype._setCurrentProgress=function(){var t=(Date.now()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),i=nt.getWidth(this.progressBar),n=Math.round(i*e);nt.set(this.firstValueElement,"width",n+"px")},at.prototype.start=function(t,e){var i=this;et.addClass(this.progressBar,st),this.maxTimeout=t,this.startTime=e||Date.now(),this._setCurrentProgress(),this.animationInterval=it.setInterval.call(Me,function(){return i._setCurrentProgress()},10)},at.prototype.stop=function(){this.animationInterval&&(it.clearInterval.call(Me,this.animationInterval),this.animationInterval=null)},at.prototype.reset=function(){nt.set(this.firstValueElement,"width",0),et.removeClass(this.progressBar,st)},at);function at(t,e){this.progressBar=t,this.firstValueElement=e,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}var rt=t.shadowUI,lt=t.nativeMethods,ut=e.styleUtils,ht=e.positionUtils,ct={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},dt={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},pt=0,mt=.6,gt=1,ft="indeterminate",vt=(yt._updateValueAnimation=function(t,e,i){var n,s,o,a,r,l,u,h,c,d,p,m,g,f=i.time,v=i.points,y=i.positionByCompletePercent,C=Date.now()-t,E=(n=C/f,s=v[0],o=v[1],3*Math.pow(1-n,2)*n*s+3*(1-n)*n*n*o+n*n*n),_=(h=(l=(a=E)<mt)?mt:gt,c=(r=y)[u=l?pt:mt],d=r[h],p={x:u,y:c.left},m={x:h,y:d.left},g=ht.getLineYByXCoord(p,m,a),p={x:u,y:c.right},m={x:h,y:d.right},{left:g,right:ht.getLineYByXCoord(p,m,a)}),w=_.left,S=_.right;ut.set(e,"left",Math.round(w)+"%"),ut.set(e,"right",Math.round(S)+"%")},yt.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(lt.clearInterval.call(Me,this.animationInterval),this.animationInterval=null),ut.set(this.firstValue,"left","-35%"),ut.set(this.firstValue,"right","100%")},yt.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(lt.clearInterval.call(Me,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),ut.set(this.secondValue,"left","-200%"),ut.set(this.secondValue,"right","100%")},yt.prototype._startFirstValueAnimation=function(){var t=this;this._clearFirstValueAnimation();var e=Date.now();this.animationInterval=lt.setInterval.call(Me,function(){yt._updateValueAnimation(e,t.firstValue,ct)},10)},yt.prototype._startSecondValueAnimation=function(){var t=this;this._clearSecondValueAnimation();var e=Date.now();this.secondValueAnimationInterval=lt.setInterval.call(Me,function(){yt._updateValueAnimation(e,t.secondValue,dt)},10)},yt.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=lt.setTimeout.call(Me,function(){return t._startSecondValueAnimation()},1e3),this.restartAnimationTimeout=lt.setTimeout.call(Me,function(){return t._startAnimation()},1950)},yt.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(lt.clearInterval.call(Me,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(lt.clearInterval.call(Me,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},yt.prototype.start=function(){rt.addClass(this.progressBar,ft),this._startAnimation()},yt.prototype.stop=function(){rt.removeClass(this.progressBar,ft),this._stopAnimation()},yt);function yt(t,e,i){this.progressBar=t,this.firstValue=e,this.secondValue=i,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}var Ct=t.shadowUI,Et=e.styleUtils,_t=(wt.prototype._create=function(t){this.progressBar=Ae.createElement("div"),Ct.addClass(this.progressBar,"progress-bar"),t.appendChild(this.progressBar);var e=Ae.createElement("div");Ct.addClass(e,"value-container"),this.progressBar.appendChild(e),this.firstValueElement=Ae.createElement("div"),Ct.addClass(this.firstValueElement,"value"),e.appendChild(this.firstValueElement),this.secondValueElement=Ae.createElement("div"),Ct.addClass(this.secondValueElement,"value"),e.appendChild(this.secondValueElement)},wt.prototype.show=function(){Et.set(this.progressBar,"visibility","visible")},wt.prototype.hide=function(){Et.set(this.progressBar,"visibility","hidden")},wt);function wt(t){this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(t),this.determinateIndicator=new ot(this.progressBar,this.firstValueElement),this.indeterminateIndicator=new vt(this.progressBar,this.firstValueElement,this.secondValueElement)}var St,It="start-waiting-element",xt="end-waiting-element-request",bt="end-waiting-element-response",Tt="start-waiting-assertion-retries",Bt="end-waiting-assertion-retries-request",Ut="end-waiting-assertion-retries-response",Dt=t.Promise,Mt=t.shadowUI,At=t.nativeMethods,Vt=t.eventSandbox.message,kt=t.utils.browser,Pt=t.utils.featureDetection,Rt=t.eventSandbox.listeners,Wt=e.styleUtils,Ot=e.eventUtils,Ft=e.domUtils,Lt=e.serviceUtils,Ht=e.arrayUtils,Nt="waiting-element-failed",qt="waiting-element-success",zt="%testCafeStatusPrefix%",Gt=(tt(jt,St=Lt.EventEmitter),jt.prototype._createButton=function(t,e){var i=Ae.createElement("div"),n=Ae.createElement("div"),s=Ae.createElement("span");return At.nodeTextContentSetter.call(s,t),Mt.addClass(i,"button"),Mt.addClass(i,e),Mt.addClass(n,"button-icon"),kt.isSafari&&(s.style.position="relative",s.style.top="1px"),i.appendChild(n),i.appendChild(s),i},jt.prototype._createIconArea=function(){this.icon=Ae.createElement("div"),Mt.addClass(this.icon,"icon"),this.statusBar.appendChild(this.icon)},jt.prototype._createInformationArea=function(){this.infoContainer=Ae.createElement("div"),Mt.addClass(this.infoContainer,"info-container"),this.statusBar.appendChild(this.infoContainer);var t=Ae.createElement("div");Mt.addClass(t,"info-text-container"),this.infoContainer.appendChild(t);var e=Ae.createElement("div");Mt.addClass(e,"status-container"),t.appendChild(e),this.statusDiv=Ae.createElement("div"),this.statusDiv=Ae.createElement("div"),At.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("Loading Web Page...")),Mt.addClass(this.statusDiv,"status"),Mt.addClass(this.statusDiv,"info"),e.appendChild(this.statusDiv);var i=Ae.createElement("div");At.nodeTextContentSetter.call(i,this.fixtureName+" - "+this.testName),Mt.addClass(i,"fixture"),Mt.addClass(i,"info"),e.appendChild(i);var n=Ae.createElement("div");At.nodeTextContentSetter.call(n,this.userAgent),Mt.addClass(n,"user-agent"),t.appendChild(n)},jt.prototype._createActionsArea=function(){var t=this;this.actionsContainer=Ae.createElement("div"),Mt.addClass(this.actionsContainer,"actions-container"),this.statusBar.appendChild(this.actionsContainer),this.buttons=Ae.createElement("div"),Mt.addClass(this.buttons,"buttons"),this.actionsContainer.appendChild(this.buttons),this.unlockButton=this._createButton("Unlock Page","locked"),this.resumeButton=this._createButton("Resume","resume"),this.nextButton=this._createButton("Next Action","step"),this.finishButton=this._createButton("Finish","finish"),this.buttons.appendChild(this.unlockButton),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.nextButton),this.actionsContainer.style.display="none",this._bindClickOnce([this.unlockButton],function(){Mt.removeClass(t.unlockButton,"locked"),Mt.addClass(t.unlockButton,"unlocked"),At.nodeTextContentSetter.call(t.unlockButton.querySelector("span"),"Page unlocked"),t.state.locked=!1,t.emit(t.UNLOCK_PAGE_BTN_CLICK,{})}),this.unlockButton.style.display="none"},jt.prototype._create=function(){this.statusBar=Ae.createElement("div"),Mt.addClass(this.statusBar,"status-bar"),this._createIconArea(),this._createInformationArea(),this._createActionsArea(),this.progressBar=new _t(this.infoContainer),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),r.element().appendChild(this.statusBar),this._bindHandlers(),this.state.created=!0},jt.prototype._createBeforeReady=function(){var t=this;this.state.created||Me!==Me.top||(Ae.body?this._create():At.setTimeout.call(Me,function(){return t._createBeforeReady()},0))},jt.prototype._animate=function(t){var e=this,i=Date.now(),n=parseInt(Wt.get(this.statusBar,"opacity"),10)||0,s=0,o=0,a=0;this._stopAnimation(),t&&(Wt.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=At.setInterval.call(Me,function(){s=Date.now()-i,o=Math.min(s/500,1),a=.5-Math.cos(o*Math.PI)/2,Wt.set(e.statusBar,"opacity",n+(t?a:-a)),1===o&&(e._stopAnimation(),t||(Wt.set(e.statusBar,"visibility","hidden"),e.state.hidden=!0),e.state.showing=!1,e.state.hiding=!1)},10)},jt.prototype._stopAnimation=function(){this.animationInterval&&(At.clearInterval.call(Me,this.animationInterval),this.animationInterval=null)},jt.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},jt.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},jt.prototype._bindHandlers=function(){var e=this;Rt.initElementListening(Me,["resize"]),Rt.addInternalEventListener(Me,["resize"],function(){e.windowHeight=Me.innerHeight});var i=Wt.getHeight(this.statusBar);Rt.addFirstInternalHandler(Me,["mousemove","mouseout","touchmove"],function(t){"mouseout"!==t.type||t.relatedTarget?"mousemove"!==t.type&&"touchmove"!==t.type||(t.clientY>e.windowHeight-i?e._fadeOut(t):e.state.hidden&&e._fadeIn(t)):e._fadeIn(t)})},jt.prototype._bindClickOnce=function(t,i){var n=this,s=Pt.isTouchDevice?"touchstart":"mousedown",o=function(e){Ht.find(t,function(t){return Ft.containsElement(t,e.target)})?(Ot.preventDefault(e),Rt.removeInternalEventListener(Me,[s],o),i(e)):Ft.containsElement(n.statusBar,e.target)&&Ot.preventDefault(e)};Rt.addInternalEventListener(Me,[s],o)},jt.prototype._initChildListening=function(){var i=this;Vt.on(Vt.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;e.cmd===It?i.showWaitingElementStatus(e.timeout):e.cmd===xt?i.hideWaitingElementStatus(e.waitingSuccess).then(function(){return Vt.sendServiceMsg({cmd:bt},t.source)}):e.cmd===Tt?i.showWaitingAssertionRetriesStatus(e.timeout):e.cmd===Bt&&i.hideWaitingAssertionRetriesStatus(e.waitingSuccess).then(function(){return Vt.sendServiceMsg({cmd:Ut},t.source)})})},jt.prototype._resetState=function(){this.state.debugging=!1,this.actionsContainer.style.display="none",this.unlockButton.style.display="none",At.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("")),this.progressBar.hide()},jt.prototype._getFullStatusText=function(t){var e=this.contextStorage.getItem(zt)||"";return e+(e&&t?". ":"")+t},jt.prototype._showWaitingStatus=function(){var t=this.state.assertionRetries?"Waiting for assertion execution...":"Waiting for element to appear...";At.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(t)),this.progressBar.show()},jt.prototype._hideWaitingStatus=function(e){var i=this;return new Dt(function(t){At.setTimeout.call(Me,function(){i.state.waiting||i.state.debugging||(Mt.removeClass(i.statusBar,qt),Mt.removeClass(i.statusBar,Nt),i.progressBar.determinateIndicator.reset(),i._resetState()),t()},e?0:500)})},jt.prototype._showDebuggingStatus=function(t){var n=this;return new Dt(function(i){n.state.debugging=!0,n.state.locked=!0,t?(n.buttons.removeChild(n.nextButton),n.buttons.removeChild(n.resumeButton),n.buttons.appendChild(n.finishButton),At.nodeTextContentSetter.call(n.statusDiv,n._getFullStatusText("Test failed")),Mt.removeClass(n.statusBar,qt),Mt.addClass(n.statusBar,Nt)):At.nodeTextContentSetter.call(n.statusDiv,n._getFullStatusText("Debugging test...")),n.actionsContainer.style.display="",n.unlockButton.style.display="",n._bindClickOnce([n.resumeButton,n.nextButton,n.finishButton],function(t){var e=Ft.containsElement(n.nextButton,t.target);n._resetState(),i(e)})})},jt.prototype._setWaitingStatus=function(t,e){var i=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,e),this.showingTimeout=At.setTimeout.call(Me,function(){i.showingTimeout=null,i._showWaitingStatus()},300)},jt.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?Mt.addClass(this.statusBar,qt):Mt.addClass(this.statusBar,Nt);var e=this.showingTimeout&&t;return this.showingTimeout&&(At.clearTimeout.call(Me,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(e)},jt.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},jt.prototype.showDebuggingStatus=function(t){return this._stopAnimation(),Wt.set(this.statusBar,"opacity",1),Wt.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},jt.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},jt.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?Dt.resolve():this._resetWaitingStatus(t)},jt.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},jt.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},jt.prototype.setStatusPrefix=function(t){this.contextStorage.setItem(zt,t),At.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(""))},jt);function jt(t,e,i,n){var s=St.call(this)||this;return s.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",s.userAgent=t,s.fixtureName=e,s.testName=i,s.contextStorage=n,s.statusBar=null,s.infoContainer=null,s.actionsContainer=null,s.icon=null,s.resumeButton=null,s.finishButton=null,s.nextButton=null,s.statusDiv=null,s.buttons=null,s.progressBar=null,s.animationInterval=null,s.showingTimeout=null,s.windowHeight=Ae.documentElement?Wt.getHeight(Me):Me.innerHeight,s.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},s.currentView=null,s._createBeforeReady(),s._initChildListening(),s}var Kt,Yt=e.sendRequestToFrame,Xt=t.eventSandbox.message,Jt=(tt(Qt,Kt=Gt),Qt.prototype.showWaitingElementStatus=function(t){Xt.sendServiceMsg({cmd:It,timeout:t},Me.top)},Qt.prototype.hideWaitingElementStatus=function(t){return Yt({cmd:xt,waitingSuccess:t},bt,Me.top)},Qt.prototype.showWaitingAssertionRetriesStatus=function(t){Xt.sendServiceMsg({cmd:Tt,timeout:t},Me.top)},Qt.prototype.hideWaitingAssertionRetriesStatus=function(t){return Yt({cmd:Bt,waitingSuccess:t},Ut,Me.top)},Qt);function Qt(){return Kt.call(this)||this}var Zt="ui|cursor|move|request",$t="ui|cursor|leftbuttondown|request",te="ui|cursor|rightbuttondown|request",ee="ui|cursor|buttonup|request",ie="ui|cursor|move|response",ne="ui|cursor|leftbuttondown|response",se="ui|cursor|rightbuttondown|response",oe="ui|cursor|buttonup|response",ae=t.Promise,re=t.shadowUI,le=t.utils.browser,ue=t.utils.featureDetection,he=t.eventSandbox.message,ce=e.styleUtils,de=e.positionUtils,pe="l-mouse-down",me="r-mouse-down",ge=[pe,me].join(" ");he.on(he.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message,i=null;switch(e.cmd){case Zt:i=de.getIframePointRelativeToParentFrame({x:e.x,y:e.y},t.source),fe.move(i.x,i.y).then(function(){return he.sendServiceMsg({cmd:ie},t.source)});break;case $t:fe.leftButtonDown().then(function(){return he.sendServiceMsg({cmd:ne},t.source)});break;case te:fe.rightButtonDown().then(function(){return he.sendServiceMsg({cmd:se},t.source)});break;case ee:fe.buttonUp().then(function(){return he.sendServiceMsg({cmd:oe},t.source)})}});var fe={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=Ae.createElement("div"),re.addClass(this.cursorElement,"cursor"),ue.isTouchDevice&&!le.isIE&&(re.addClass(this.cursorElement,"touch"),this.pointerOffsetX=Math.ceil(ce.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(ce.getHeight(this.cursorElement)/2)),r.element().appendChild(this.cursorElement)},isVisible:function(){return this.cursorElement&&"hidden"!==ce.get(this.cursorElement,"visibility")},hide:function(){this.cursorElement||this._createElement(),ce.set(this.cursorElement,"visibility","hidden")},show:function(){this.cursorElement||this._createElement(),ce.set(this.cursorElement,"visibility","")},move:function(t,e){return this.x=t,this.y=e,this.cursorElement||this._createElement(),ce.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"}),ae.resolve()},leftButtonDown:function(){return this.cursorElement||this._createElement(),re.removeClass(this.cursorElement,ge),re.addClass(this.cursorElement,pe),ae.resolve()},rightButtonDown:function(){return this.cursorElement||this._createElement(),re.removeClass(this.cursorElement,ge),re.addClass(this.cursorElement,me),ae.resolve()},buttonUp:function(){return this.cursorElement||this._createElement(),re.removeClass(this.cursorElement,ge),ae.resolve()}},ve=t.utils.browser.isIE?1:0,ye={move:function(t,e){var i={cmd:Zt,x:t+ve,y:e+ve};return o.sendRequestToFrame(i,ie,Me.parent)},leftButtonDown:function(){return o.sendRequestToFrame({cmd:$t},ne,Me.parent)},rightButtonDown:function(){return o.sendRequestToFrame({cmd:te},se,Me.parent)},buttonUp:function(){return o.sendRequestToFrame({cmd:ee},oe,Me.parent)}},Ce={screenshotMark:null,_createMark:function(){this.screenshotMark=Ae.createElement("img"),s.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=10/Me.devicePixelRatio+"px",this.screenshotMark.style.width=32/Me.devicePixelRatio+"px",this.screenshotMark.style.height=10/Me.devicePixelRatio+"px",this.hide(),s.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),s.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},Ee=t.Promise,_e=t.eventSandbox.message,we=e.sendRequestToFrame,Se="ui|hide|request",Ie="ui|hide|response",xe="ui|show|request",be="ui|show|response";_e.on(_e.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===Se?(r.hide(),_e.sendServiceMsg({cmd:Ie},t.source)):t.message.cmd===xe&&(r.show(),_e.sendServiceMsg({cmd:be},t.source))});var Te={};Te.uiRoot=r,Te.cursorUI=fe,Te.iframeCursorUI=ye,Te.selectElement=i,Te.modalBackground=H,Te.ProgressPanel=Q,Te.StatusBar=Gt,Te.IframeStatusBar=Jt,Te.hide=function(t){return t?we({cmd:Se},Ie,Me.top):(r.hide(),Ee.resolve())},Te.show=function(t){return t?we({cmd:xe},be,Me.top):(r.show(),Ee.resolve())},Te.showScreenshotMark=function(t){return Ce.show(t)},Te.hideScreenshotMark=function(){return Ce.hide()};var Be=t.nativeMethods,Ue=t.EVENTS.evalIframeScript;Be.objectDefineProperty(Me,"%testCafeUI%",{configurable:!0,value:Te}),t.on(Ue,function(t){return De(Be.contentWindowGetter.call(t.iframe))})}(Me["%hammerhead%"],Me["%testCafeCore%"])}(window);