"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_1 = require("lodash");
const warning_messages_1 = require("../templates/warning-messages");
// NOTE: We need to continuously poll BrowserStack APIs in Automate sessions to avoid the idle timeout.
// The value can be reduced for unstable network connections if there is a high risk of random request failures.
const DEFAULT_API_POLLING_INTERVAL = 80000;
// NOTE: the max value is capped at the BrowserStack idle timeout.
// https://www.browserstack.com/automate/timeouts
const MAX_API_POLLING_INTERVAL = 90000;
function default_1() {
    const pollingInterval = lodash_1.toInteger(process.env.TESTCAFE_BROWSERSTACK_API_POLLING_INTERVAL) || DEFAULT_API_POLLING_INTERVAL;
    if (pollingInterval > MAX_API_POLLING_INTERVAL)
        process.emitWarning(warning_messages_1.API_POLLING_INTERVAL_IS_TOO_LARGE({ actual: pollingInterval, expected: MAX_API_POLLING_INTERVAL }));
    return pollingInterval;
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWFwaS1wb2xsaW5nLWludGVydmFsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL2dldC1hcGktcG9sbGluZy1pbnRlcnZhbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1DQUFtQztBQUNuQyxvRUFBa0Y7QUFFbEYsdUdBQXVHO0FBQ3ZHLGdIQUFnSDtBQUNoSCxNQUFNLDRCQUE0QixHQUFHLEtBQUssQ0FBQztBQUUzQyxrRUFBa0U7QUFDbEUsaURBQWlEO0FBQ2pELE1BQU0sd0JBQXdCLEdBQUcsS0FBSyxDQUFDO0FBRXZDO0lBQ0ksTUFBTSxlQUFlLEdBQUcsa0JBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLDBDQUEwQyxDQUFDLElBQUksNEJBQTRCLENBQUM7SUFFMUgsSUFBSSxlQUFlLEdBQUcsd0JBQXdCO1FBQzFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsb0RBQWlDLENBQUMsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUU1SCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDO0FBUEQsNEJBT0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b0ludGVnZXIgfSBmcm9tICdsb2Rhc2gnO1xyXG5pbXBvcnQgeyBBUElfUE9MTElOR19JTlRFUlZBTF9JU19UT09fTEFSR0UgfSBmcm9tICcuLi90ZW1wbGF0ZXMvd2FybmluZy1tZXNzYWdlcyc7XHJcblxyXG4vLyBOT1RFOiBXZSBuZWVkIHRvIGNvbnRpbnVvdXNseSBwb2xsIEJyb3dzZXJTdGFjayBBUElzIGluIEF1dG9tYXRlIHNlc3Npb25zIHRvIGF2b2lkIHRoZSBpZGxlIHRpbWVvdXQuXHJcbi8vIFRoZSB2YWx1ZSBjYW4gYmUgcmVkdWNlZCBmb3IgdW5zdGFibGUgbmV0d29yayBjb25uZWN0aW9ucyBpZiB0aGVyZSBpcyBhIGhpZ2ggcmlzayBvZiByYW5kb20gcmVxdWVzdCBmYWlsdXJlcy5cclxuY29uc3QgREVGQVVMVF9BUElfUE9MTElOR19JTlRFUlZBTCA9IDgwMDAwO1xyXG5cclxuLy8gTk9URTogdGhlIG1heCB2YWx1ZSBpcyBjYXBwZWQgYXQgdGhlIEJyb3dzZXJTdGFjayBpZGxlIHRpbWVvdXQuXHJcbi8vIGh0dHBzOi8vd3d3LmJyb3dzZXJzdGFjay5jb20vYXV0b21hdGUvdGltZW91dHNcclxuY29uc3QgTUFYX0FQSV9QT0xMSU5HX0lOVEVSVkFMID0gOTAwMDA7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBwb2xsaW5nSW50ZXJ2YWwgPSB0b0ludGVnZXIocHJvY2Vzcy5lbnYuVEVTVENBRkVfQlJPV1NFUlNUQUNLX0FQSV9QT0xMSU5HX0lOVEVSVkFMKSB8fCBERUZBVUxUX0FQSV9QT0xMSU5HX0lOVEVSVkFMO1xyXG5cclxuICAgIGlmIChwb2xsaW5nSW50ZXJ2YWwgPiBNQVhfQVBJX1BPTExJTkdfSU5URVJWQUwpXHJcbiAgICAgICAgcHJvY2Vzcy5lbWl0V2FybmluZyhBUElfUE9MTElOR19JTlRFUlZBTF9JU19UT09fTEFSR0UoeyBhY3R1YWw6IHBvbGxpbmdJbnRlcnZhbCwgZXhwZWN0ZWQ6IE1BWF9BUElfUE9MTElOR19JTlRFUlZBTCB9KSk7XHJcblxyXG4gICAgcmV0dXJuIHBvbGxpbmdJbnRlcnZhbDtcclxufVxyXG4iXX0=